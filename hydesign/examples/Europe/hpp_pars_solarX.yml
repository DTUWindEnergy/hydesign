# --------------------------------------------------------------------------------------------
# HPP Global
# --------------------------------------------------------------------------------------------
grid_el_capacity: 20 # Grid electiricy capacity
grid_heat_capacity: 20 # Grid heat capacity
grid_h2_capacity: 10_000 # Grid hydrogen capacity
year: '2012' # Single representative year
N_life: 25
max_el_buy_from_grid_mw: 0
# Penalty is defined as: Number of peak hours of full load expected per day.
n_full_power_hours_expected_per_day_at_peak_price: 0 
peak_hr_quantile: 0.9 # An hour of peak price has prices above this quantile

# --------------------------------------------------------------------------------------------
# SOLAR FIELD
# --------------------------------------------------------------------------------------------
tower_diameter: 3
sf_azimuth_altitude_efficiency_table_cpv:
  tower_height: [50]  # In meters
  sf_area: [8_000]    # In m2
  concentration_ratio: [889, 2000]
  azimuth: [60, 74, 82, 84, 95, 108, 115, 116, 120, 132, 138, 147, 156, 180, 204, 213, 222, 228, 240, 244, 245, 252, 265, 276, 278, 286, 300]
  altitude: [0, 20, 50, 70, 90]
  efficiency:
    - # tower_height 50
      - # sf_area 8000
        - # concentration ratio 889
          - [0.204665, 0.208332, 0.210427, 0.210951, 0.213832, 0.217153, 0.218941, 0.219196, 0.216526, 0.208513, 0.204507, 0.205838, 0.207168, 0.210716, 0.214264, 0.215594, 0.216925, 0.2178, 0.219551, 0.220135, 0.219704, 0.216685, 0.21108, 0.210346, 0.210212, 0.209678, 0.208744]  # Altitude 4
          - [0.554782, 0.592787, 0.614504, 0.619934, 0.645862, 0.676503, 0.677834, 0.678024, 0.678785, 0.681066, 0.689869, 0.703072, 0.716276, 0.751724, 0.70665, 0.699385, 0.692119, 0.687276, 0.683012, 0.681591, 0.681236, 0.678749, 0.649581, 0.624901, 0.619109, 0.59594, 0.555394]  # Altitude 25
          - [0.637551, 0.662881, 0.677355, 0.680974, 0.700876, 0.724397, 0.737062, 0.738501, 0.744257, 0.761527, 0.770162, 0.783114, 0.787865, 0.800533, 0.788744, 0.784323, 0.771373, 0.762739, 0.745472, 0.739717, 0.738278, 0.72563, 0.702143, 0.682269, 0.678655, 0.664201, 0.638907]  # Altitude 47
          - [0.724175, 0.731029, 0.734945, 0.735924, 0.74131, 0.747674, 0.751101, 0.751591, 0.753549, 0.759424, 0.762362, 0.766768, 0.771174, 0.782924, 0.771496, 0.767211, 0.762925, 0.760068, 0.754354, 0.75245, 0.751974, 0.74864, 0.74245, 0.737213, 0.73626, 0.732451, 0.725785]  # Altitude 68
          - [0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955]  # Altitude 90
        - # concentration ratio 2000
          - [0.168752, 0.171173, 0.172557, 0.172903, 0.174805, 0.177438, 0.178856, 0.179058, 0.176318, 0.168098, 0.163988, 0.165338, 0.166689, 0.170291, 0.173893, 0.175244, 0.176594, 0.177453, 0.17917, 0.179742, 0.179383, 0.17687, 0.172203, 0.172205, 0.172205, 0.172207, 0.172209]  # Altitude 4
          - [0.473952, 0.504128, 0.521372, 0.525683, 0.544822, 0.567441, 0.566166, 0.565983, 0.565254, 0.563067, 0.570248, 0.581018, 0.591789, 0.622542, 0.581763, 0.576634, 0.571505, 0.568086, 0.568513, 0.568655, 0.568691, 0.568939, 0.547682, 0.529696, 0.52505, 0.506464, 0.47394]  # Altitude 25
          - [0.547336, 0.565562, 0.575976, 0.57858, 0.5929, 0.609823, 0.618936, 0.619979, 0.624149, 0.636659, 0.642914, 0.652297, 0.655711, 0.664815, 0.656126, 0.652868, 0.643454, 0.637178, 0.624627, 0.620443, 0.619397, 0.61042, 0.593748, 0.579641, 0.577076, 0.566817, 0.548863]  # Altitude 47
          - [0.615993, 0.620775, 0.623507, 0.62419, 0.627947, 0.632387, 0.634778, 0.63512, 0.636486, 0.640585, 0.642634, 0.645708, 0.648782, 0.656979, 0.648839, 0.645786, 0.642734, 0.640699, 0.636629, 0.635273, 0.634933, 0.632559, 0.62815, 0.62442, 0.623741, 0.621028, 0.61628]  # Altitude 68
          - [0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037]  # Altitude 90

sf_azimuth_altitude_efficiency_table_cst:
  tower_height: [50]  # In meters
  sf_area: [8_000]    # In m2
  concentration_ratio: [889, 2000]
  azimuth: [60, 74, 82, 84, 95, 108, 115, 116, 120, 132, 138, 147, 156, 180, 204, 213, 222, 228, 240, 244, 245, 252, 265, 276, 278, 286, 300]
  altitude: [0, 20, 50, 70, 90]
  efficiency:
    - # tower_height 50
      - # sf_area 8000
        - # concentration ratio 889
          - [0.204665, 0.208332, 0.210427, 0.210951, 0.213832, 0.217153, 0.218941, 0.219196, 0.216526, 0.208513, 0.204507, 0.205838, 0.207168, 0.210716, 0.214264, 0.215594, 0.216925, 0.2178, 0.219551, 0.220135, 0.219704, 0.216685, 0.21108, 0.210346, 0.210212, 0.209678, 0.208744]  # Altitude 4
          - [0.554782, 0.592787, 0.614504, 0.619934, 0.645862, 0.676503, 0.677834, 0.678024, 0.678785, 0.681066, 0.689869, 0.703072, 0.716276, 0.751724, 0.70665, 0.699385, 0.692119, 0.687276, 0.683012, 0.681591, 0.681236, 0.678749, 0.649581, 0.624901, 0.619109, 0.59594, 0.555394]  # Altitude 25
          - [0.637551, 0.662881, 0.677355, 0.680974, 0.700876, 0.724397, 0.737062, 0.738501, 0.744257, 0.761527, 0.770162, 0.783114, 0.787865, 0.800533, 0.788744, 0.784323, 0.771373, 0.762739, 0.745472, 0.739717, 0.738278, 0.72563, 0.702143, 0.682269, 0.678655, 0.664201, 0.638907]  # Altitude 47
          - [0.724175, 0.731029, 0.734945, 0.735924, 0.74131, 0.747674, 0.751101, 0.751591, 0.753549, 0.759424, 0.762362, 0.766768, 0.771174, 0.782924, 0.771496, 0.767211, 0.762925, 0.760068, 0.754354, 0.75245, 0.751974, 0.74864, 0.74245, 0.737213, 0.73626, 0.732451, 0.725785]  # Altitude 68
          - [0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955]  # Altitude 90
        - # concentration ratio 2000
          - [0.168752, 0.171173, 0.172557, 0.172903, 0.174805, 0.177438, 0.178856, 0.179058, 0.176318, 0.168098, 0.163988, 0.165338, 0.166689, 0.170291, 0.173893, 0.175244, 0.176594, 0.177453, 0.17917, 0.179742, 0.179383, 0.17687, 0.172203, 0.172205, 0.172205, 0.172207, 0.172209]  # Altitude 4
          - [0.473952, 0.504128, 0.521372, 0.525683, 0.544822, 0.567441, 0.566166, 0.565983, 0.565254, 0.563067, 0.570248, 0.581018, 0.591789, 0.622542, 0.581763, 0.576634, 0.571505, 0.568086, 0.568513, 0.568655, 0.568691, 0.568939, 0.547682, 0.529696, 0.52505, 0.506464, 0.47394]  # Altitude 25
          - [0.547336, 0.565562, 0.575976, 0.57858, 0.5929, 0.609823, 0.618936, 0.619979, 0.624149, 0.636659, 0.642914, 0.652297, 0.655711, 0.664815, 0.656126, 0.652868, 0.643454, 0.637178, 0.624627, 0.620443, 0.619397, 0.61042, 0.593748, 0.579641, 0.577076, 0.566817, 0.548863]  # Altitude 47
          - [0.615993, 0.620775, 0.623507, 0.62419, 0.627947, 0.632387, 0.634778, 0.63512, 0.636486, 0.640585, 0.642634, 0.645708, 0.648782, 0.656979, 0.648839, 0.645786, 0.642734, 0.640699, 0.636629, 0.635273, 0.634933, 0.632559, 0.62815, 0.62442, 0.623741, 0.621028, 0.61628]  # Altitude 68
          - [0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037]  # Altitude 90

sf_azimuth_altitude_efficiency_table_h2:
  tower_height: [50]  # In meters
  sf_area: [8_000]    # In m2
  concentration_ratio: [889, 2000]
  azimuth: [60, 74, 82, 84, 95, 108, 115, 116, 120, 132, 138, 147, 156, 180, 204, 213, 222, 228, 240, 244, 245, 252, 265, 276, 278, 286, 300]
  altitude: [0, 20, 50, 70, 90]
  efficiency:
    - # tower_height 50
      - # sf_area 8000
        - # concentration ratio 889
          - [0.204665, 0.208332, 0.210427, 0.210951, 0.213832, 0.217153, 0.218941, 0.219196, 0.216526, 0.208513, 0.204507, 0.205838, 0.207168, 0.210716, 0.214264, 0.215594, 0.216925, 0.2178, 0.219551, 0.220135, 0.219704, 0.216685, 0.21108, 0.210346, 0.210212, 0.209678, 0.208744]  # Altitude 4
          - [0.554782, 0.592787, 0.614504, 0.619934, 0.645862, 0.676503, 0.677834, 0.678024, 0.678785, 0.681066, 0.689869, 0.703072, 0.716276, 0.751724, 0.70665, 0.699385, 0.692119, 0.687276, 0.683012, 0.681591, 0.681236, 0.678749, 0.649581, 0.624901, 0.619109, 0.59594, 0.555394]  # Altitude 25
          - [0.637551, 0.662881, 0.677355, 0.680974, 0.700876, 0.724397, 0.737062, 0.738501, 0.744257, 0.761527, 0.770162, 0.783114, 0.787865, 0.800533, 0.788744, 0.784323, 0.771373, 0.762739, 0.745472, 0.739717, 0.738278, 0.72563, 0.702143, 0.682269, 0.678655, 0.664201, 0.638907]  # Altitude 47
          - [0.724175, 0.731029, 0.734945, 0.735924, 0.74131, 0.747674, 0.751101, 0.751591, 0.753549, 0.759424, 0.762362, 0.766768, 0.771174, 0.782924, 0.771496, 0.767211, 0.762925, 0.760068, 0.754354, 0.75245, 0.751974, 0.74864, 0.74245, 0.737213, 0.73626, 0.732451, 0.725785]  # Altitude 68
          - [0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955, 0.737955]  # Altitude 90
        - # concentration ratio 2000
          - [0.168752, 0.171173, 0.172557, 0.172903, 0.174805, 0.177438, 0.178856, 0.179058, 0.176318, 0.168098, 0.163988, 0.165338, 0.166689, 0.170291, 0.173893, 0.175244, 0.176594, 0.177453, 0.17917, 0.179742, 0.179383, 0.17687, 0.172203, 0.172205, 0.172205, 0.172207, 0.172209]  # Altitude 4
          - [0.473952, 0.504128, 0.521372, 0.525683, 0.544822, 0.567441, 0.566166, 0.565983, 0.565254, 0.563067, 0.570248, 0.581018, 0.591789, 0.622542, 0.581763, 0.576634, 0.571505, 0.568086, 0.568513, 0.568655, 0.568691, 0.568939, 0.547682, 0.529696, 0.52505, 0.506464, 0.47394]  # Altitude 25
          - [0.547336, 0.565562, 0.575976, 0.57858, 0.5929, 0.609823, 0.618936, 0.619979, 0.624149, 0.636659, 0.642914, 0.652297, 0.655711, 0.664815, 0.656126, 0.652868, 0.643454, 0.637178, 0.624627, 0.620443, 0.619397, 0.61042, 0.593748, 0.579641, 0.577076, 0.566817, 0.548863]  # Altitude 47
          - [0.615993, 0.620775, 0.623507, 0.62419, 0.627947, 0.632387, 0.634778, 0.63512, 0.636486, 0.640585, 0.642634, 0.645708, 0.648782, 0.656979, 0.648839, 0.645786, 0.642734, 0.640699, 0.636629, 0.635273, 0.634933, 0.632559, 0.62815, 0.62442, 0.623741, 0.621028, 0.61628]  # Altitude 68
          - [0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037, 0.627037]  # Altitude 90
# --------------------------------------------------------------------------------------------
# CPV
# --------------------------------------------------------------------------------------------
p_max_cpv_mw_per_m2: 1.4
cpv_dc_ac_ratio: 1
cpv_efficiency: 0.41  # Efficiency in decimal

# --------------------------------------------------------------------------------------------
# CST MOLTEN SALT
# --------------------------------------------------------------------------------------------
cst_ms_receiver_efficiency_table:
  flux_values: [0.10555, 0.10556, 0.373]  # Flux in MW/m²
  wind_speed_values: [0, 10]  # Wind speed in m/s
  efficiency_values:
    - [0.0, 0.0]  # Efficiencies for flux = 500 W/m² at wind speeds 0, 5, 10 m/s
    - [0.9521, 0.9521]  # Efficiencies for flux = 500 W/m² at wind speeds 0, 5, 10 m/s
    - [0.9716, 0.9716]  # Efficiencies for flux = 1500 W/m² at wind speeds 0, 5, 10 m/s------------------
# receiver
flux_max_cst_reciever_MW_per_m2: 0.373

    
# Molten salt
Molten_salt_density: 1818 # kg/m3
Heat_capacity_of_molten_salt: 1,52 # kJ/kg/K
Hot_molten_salt_storage_temperature: 565 # °C
Cold_molten_salt_storage_temperature: 290 # °C
hot_steam_temp_ms: 500
cold_steam_temp_ms: 290
hot_molten_salt_density: 1731 # kg/m3
Cold_molten_salt_density: 1906 # kg/m3
Hot_molten_salt_specific_heat: 1.54 # kJ/kg/K
Cold_molten_salt_specific_heat: 1.50 # kJ/kg/K
steam_specific_heat_capacity: 2.080 # [kJ/kg.oC]

# molten salt tank
hot_tank_efficiency: 1
v_min_hot_ms_percentage: 0.0
v_max_hot_ms_percentage: 1

# heat exchanger
heat_exchanger_efficiency: 0.8

# steam turbine
steam_turbine_efficiency: 0.39

# penalty for not meeting heat demand (euro/MWht)
heat_penalty_euro_per_mwht: 0 # euro/MWht

#
# --------------------------------------------------------------------------------------------
# BIOGAS to H2
# --------------------------------------------------------------------------------------------
maximum_h2_production_reactor_kg_per_m2: 64
heat_mwht_per_kg_h2: 0.01
biogas_h2_mass_ratio: 7.63
water_h2_mass_ratio: 3
co2_h2_mass_ratio: 0

biogas_h2_reactor_efficiency_curve:
  heat_mwt_per_m2: [0.299, 0.3, 0.4, 0.7]
  efficiencies: [0, 0.4, 0.68, 0.9] #  Efficiency in decimal
  
biogas_h2_reactor_dni_to_heat_efficiency: 0.7
biogas_h2_reactor_el_to_heat_efficiency: 0.95
  
# --------------------------------------------------------------------------------------------
# solar field costs
# --------------------------------------------------------------------------------------------
heliostat_cost_per_m2: 115
sf_opex_cost_per_m2: 3

# --------------------------------------------------------------------------------------------
# CPV costs
# --------------------------------------------------------------------------------------------
cpv_cost_per_m2: 28_000
cpv_inverter_cost_per_MW_DC: 0
cpv_fixed_opex_cost_per_m2: 0


# --------------------------------------------------------------------------------------------
# CST molten salt costs
# --------------------------------------------------------------------------------------------
cst_th_collector_cost_per_m2: 45_000 #[Euro/m**2]
ms_installation_cost_per_m3: 4_640 #[Euro/m**3]
steam_turbine_cost_per_MW: 800_000 #[Euro/MW]
heat_exchnager_cost_per_MW: 0 #[Euro/MW]
fixed_opex_per_MW: 0

# --------------------------------------------------------------------------------------------
# BIOGAS_H2 costs
# --------------------------------------------------------------------------------------------
reactor_cost_per_m2: 50_000 #[Euro/m**2]
el_heater_cost_kg_per_h: 0 #[Euro/kg/h]
pipe_pump_valves_cost_kg_per_h: 0 #[Euro/kg/h]
psa_cost_kg_per_h: 0 #[Euro/kg/h]
carbon_capture_cost_kg_per_h: 0 #[Euro/kg/h]
dni_installation_cost_kg_per_h: 0 #[Euro/kg/h]
el_installation_cost_kg_per_h: 0 #[Euro/kg/h]
maintenance_cost_kg_per_h: 0 #[Euro/kg/h]

# --------------------------------------------------------------------------------------------
# Shared costs
# --------------------------------------------------------------------------------------------
BOS_soft_cost_m2: 0 # [Euro/m**2]
grid_connection_cost_mw: 0 # [Euro/MW]
grid_h2_connection_cost_per_kg_h: 0
grid_thermal_connection_cost_per_mwt: 0
#land cost not same format in excel it's per MW
land_cost_m2: 0  #  [Euro/m**2]
tower_cost_per_m: 15_000 #[Euro/m]

# --------------------------------------------------------------------------------------------
# Financial and Economic data (ATB NREL)
# --------------------------------------------------------------------------------------------
discount_rate: 0.05
tax_rate: 0    # Corporate tax rate

# Early CAPEX payment, or phasing 
phasing_yr: [-1,0]
phasing_CAPEX: [0,1] # shares will be normalized to sum the CAPEX

# Inflation will be linearly interpolated at integer year values
inflation_yr: [-3,    0,    1,   25]
inflation: [ 0.0, 0.0, 0.0, 0.0] # [ 0.10, 0.10, 0.06, 0.06]
ref_yr_inflation: 0 # inflation index is computed with respect to this year

# depreciation
depreciation_yr: [0, 25]
depreciation: [0, 1]


# --------------------------------------------------------------------------------------------
# Weather databases
# Not required if the user provides input_ts_fn.csv to hpp_model
# --------------------------------------------------------------------------------------------
era5_zarr: '/groups/reanalyses/era5/app/era5.zarr' # location of wind speed renalysis
ratio_gwa_era5: '/groups/INP/era5/ratio_gwa2_era5.nc' # location of mean wind speed correction factor
era5_ghi_zarr: '/groups/INP/era5/ghi.zarr' # location of GHI renalysis
elevation_fn: '/groups/INP/era5/SRTMv3_plus_ViewFinder_coarsen.nc' # Altitude map for extracting altitude



  
